<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Liste des Utilisateurs</h2>
    <button class="btn btn-primary" (click)="toggleDataSource()">
      {{ useMockData ? 'Utiliser API' : 'Utiliser données de test' }}
    </button>
  </div>

  <!-- Loader -->
  <div *ngIf="loading" class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
    <p class="mt-2">Chargement des utilisateurs...</p>
  </div>

  <!-- Error message -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Table -->
  <div *ngIf="!loading && !error" class="table-responsive">
    <table class="table table-striped table-hover user-table">
      <thead class="table-header">
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Nom</th>
          <th scope="col">Prénom</th>
          <th scope="col">Rôle</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users">
          <td>{{ user.id }}</td>
          <td>{{ user.nom }}</td>
          <td>{{ user.prenom }}</td>
          <td>
            <span class="badge"
                  [ngClass]="{
                    'bg-danger': user.role === 'ADMIN',
                    'bg-success': user.role === 'USER',
                    'bg-warning': user.role === 'MODERATOR'
                  }">{{ user.role }}</span>
          </td>
          <td>
            <button class="btn btn-sm btn-info me-2"><i class="bi bi-eye"></i> Voir</button>
            <button class="btn btn-sm btn-warning me-2"><i class="bi bi-pencil"></i> Modifier</button>
            <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i> Supprimer</button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Empty state -->
    <div *ngIf="users.length === 0" class="text-center p-5">
      <p class="text-muted">Aucun utilisateur trouvé</p>
    </div>
  </div>
</div>
